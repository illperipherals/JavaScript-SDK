var KnurldVerificationImpl=KnurldVerificationImpl||{};KnurldVerificationImpl.post=function(i,n,l,t){var r=KnurldSDKUtil.getAPIParams(t,n,l);if(!KnurldSDKUtil.isValidObj(i))return KnurldResponse.invalidInputResponse(KnurldConstants.INVALID_INPUT,r);var e;r.requestType=KnurldConstants.POST;var a={};if(KnurldSDKUtil.isValidObj(i.verificationId)){if(e=KnurldSDKUtil.buildUrl("verifications/"+i.verificationId,KnurldConstants.ISV1),!KnurldSDKUtil.isValidObj(i.verificationUrl))return KnurldResponse.invalidInputResponse("verificationUrl",r);if(a["verification.wav"]=i.verificationUrl,a.intervals=i.intervals,!KnurldSDKUtil.isValidObj(i.intervals))return KnurldSDKUtil.isValidObj(i.phrases)?void KnurldVerificationImpl.addIntervals(e,i,a,r,l):KnurldResponse.invalidInputResponse("phrases",r)}else{if(!KnurldSDKUtil.isValidObj(i.applicationId))return KnurldResponse.invalidInputResponse("applicationId",r);if(!KnurldSDKUtil.isValidObj(i.consumerId))return KnurldResponse.invalidInputResponse("consumerId",r);e=KnurldSDKUtil.buildUrl("verifications",KnurldConstants.ISV1),a.application=KnurldSDKUtil.buildApplicationIdUrl(i.applicationId),a.consumer=KnurldSDKUtil.buildConsumerIdUrl(i.consumerId)}return KnurldHttpRequest.sendRequest(e,a,r)},KnurldVerificationImpl.addIntervals=function(i,n,l,t,r){var e={};e.audioUrl=n.verificationUrl,KnurldSDK.analytics.url(e,function(e){var a=(e.taskName,{});a.isTimer=!0,a.interval=100,a.id=e.taskName;var s=KnurldSDK.analytics.get(a,function(e){if("completed"==e.taskStatus){var a=e.intervals,u=0;angular.forEach(a,function(i,l){angular.isUndefined(u)||(i.phrase=n.phrases[u]),u++})}else r("invalid audio please upload new one");return KnurldSDK.clearInterval(s),l.intervals=a,KnurldHttpRequest.sendRequest(i,l,t)},r)})},KnurldVerificationImpl.get=function(i,n,l,t){var r,e={},a=KnurldSDKUtil.getAPIParams(t,n,l);return KnurldSDKUtil.isValidObj(i.verificationId)?r=KnurldSDKUtil.buildUrl("verifications/"+i.verificationId,KnurldConstants.ISV1):(KnurldSDKUtil.isValidObj(i.limit)&&(e.limit=i.limit),KnurldSDKUtil.isValidObj(i.offset)&&(e.offset=i.offset),r=KnurldSDKUtil.buildUrl("verifications",KnurldConstants.ISV1)),KnurldHttpRequest.sendRequest(r,e,a)},KnurldVerificationImpl.getAll=function(n,l,t,r){var r={},e=[],a=0;KnurldVerificationImpl.get(n,function(n){if(KnurldSDKUtil.isValidObj(n))if(n.length<=10)l(n);else{var t=n.items;for(var s in t)e[e.length]=t[s];for(i=10;i<n.total;i+=KnurldConstants.FETCH_ALL_OFFSET){var u={};u.limit=KnurldConstants.FETCH_ALL_OFFSET,u.offset=i,KnurldVerificationImpl.get(u,function(i){var n=i.items;for(var t in n)e[e.length]=n[t];e.length>=i.total-a*KnurldConstants.FETCH_ALL_OFFSET&&l(e)},function(i){console.log(i),a++},r)}}},function(i){t(i)},r)},KnurldVerificationImpl.del=function(i,n,l,t){var r=KnurldSDKUtil.getAPIParams(t,n,l);if(!KnurldSDKUtil.isEmpty(i.verificationId))return KnurldResponse.invalidInputResponse("verificationId",r);var e=KnurldSDKUtil.buildUrl("verifications/"+i.verificationId,KnurldConstants.ISV1);return r.requestType=KnurldConstants.DELETE,KnurldHttpRequest.sendRequest(e,null,r)};