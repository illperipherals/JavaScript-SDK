var KnurldHttpRequest=KnurldHttpRequest||{};KnurldHttpRequest.sendRequest=function(url,bodyParams,configParams){var httpRequest=new XMLHttpRequest,urlEncodedData="",urlEncodedDataPairs=[];if(!httpRequest)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;if(null!=bodyParams)if(KnurldConstants.CONTENT_TYPE_FORM_ENCODED_URL==configParams.contentType||KnurldConstants.GET==configParams.requestType){for(name in bodyParams)urlEncodedDataPairs.push(encodeURIComponent(name)+"="+encodeURIComponent(bodyParams[name]));urlEncodedData=urlEncodedDataPairs.join("&").replace(/%20/g,"+")}else if(KnurldConstants.CONTENT_TYPE_APPLICATION_JSON==configParams.contentType){var jsonObj={};for(name in bodyParams)jsonObj[name]=bodyParams[name];urlEncodedData=JSON.stringify(jsonObj)}else if(KnurldConstants.CONTENT_TYPE_MULTIPART_FORM_DATA==configParams.contentType){urlEncodedData=new FormData;for(name in bodyParams)urlEncodedData.append(name,bodyParams[name])}return httpRequest.onreadystatechange=function(){var response={};return httpRequest.readyState==XMLHttpRequest.DONE&&configParams.async?4==httpRequest.readyState&&(200===httpRequest.status||201===httpRequest.status||202===httpRequest.status)||KnurldConstants.DELETE==configParams.requestType&&204===httpRequest.status?(response=httpRequest.responseText,""!=response&&-1!=response.indexOf("{")&&(response=eval("("+response+")")),void 0!=configParams.localSuccessHandler?configParams.localSuccessHandler(response,configParams.successCallBack):configParams.successCallBack(response),response):(response=httpRequest.responseText,response=KnurldSDKUtil.isEmpty(response)?eval("("+response+")"):{},response.StatusCode=httpRequest.status,configParams.errorCallBack(response),response):void 0},KnurldConstants.GET==configParams.requestType&&(url+="?"+urlEncodedData),httpRequest.open(configParams.requestType,url,configParams.async),KnurldConstants.POST==configParams.requestType&&KnurldConstants.CONTENT_TYPE_MULTIPART_FORM_DATA!=configParams.contentType&&httpRequest.setRequestHeader("Content-Type",configParams.contentType),configParams.sendAccessToken&&httpRequest.setRequestHeader("Authorization","Bearer "+KnurldConstants.ACCESS_TOKEN),configParams.sendDevID&&(KnurldSDK.isConsumer()&&!configParams.forceAdmin?httpRequest.setRequestHeader("Developer-Id",KnurldConstants.CONSUMER_DEV_ID):httpRequest.setRequestHeader("Developer-Id",KnurldConstants.DEV_ID)),httpRequest.send(urlEncodedData)},KnurldHttpRequest.uploadFile=function(e,t,s){var a=new XMLHttpRequest;if(!a)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;var n=new FormData;for(name in t)n.append(name,t[name]);a.onreadystatechange=function(){var e={};return a.readyState==XMLHttpRequest.DONE&&s.async?4==a.readyState&&(200===a.status||201===a.status||202===a.status)||KnurldConstants.DELETE==s.requestType&&204===a.status?(e=a.responseText,void 0!=s.localSuccessHandler?s.localSuccessHandler(e,s.successCallBack):s.successCallBack(e),e):(e=a.responseText,e.StatusCode=a.status,s.errorCallBack(e),e):void 0},a.open("post",e,!0),a.send(n)};